!function(t){"use strict";var p=Array.prototype.indexOf?function(t,i){return t.indexOf(i)}:function(t,i){for(var o=0,e=t.length;o<e;o++){if(t[o]===i)return o}return-1};function i(u,t){var i=t.create("masonryHorizontal");return i.prototype._resetLayout=function(){this.getRowHeight(),this._getMeasurement("gutter","outerHeight"),this.rowHeight+=this.gutter,this.rows=Math.floor((this.isotope.size.innerHeight+this.gutter)/this.rowHeight),this.rows=Math.max(this.rows,1);var t=this.rows;for(this.rowXs=[];t--;)this.rowXs.push(0);this.maxX=0},i.prototype._getItemLayoutPosition=function(t){t.getSize();var i=Math.ceil(t.size.outerHeight/this.rowHeight);i=Math.min(i,this.rows);for(var o=this._getRowGroup(i),e=Math.min.apply(Math,o),r=p(o,e),s={x:e,y:this.rowHeight*r},h=e+t.size.outerWidth,n=this.rows+1-o.length,a=0;a<n;a++)this.rowXs[r+a]=h;return s},i.prototype._getRowGroup=function(t){if(t<2)return this.rowXs;for(var i=[],o=this.rows+1-t,e=0;e<o;e++){var r=this.rowXs.slice(e,e+t);i[e]=Math.max.apply(Math,r)}return i},i.prototype._manageStamp=function(t){var i=u(t),o=this.isotope._getElementOffset(t),e=this.isotope.options.isOriginTop?o.top:o.bottom,r=e+i.outerHeight,s=Math.floor(e/this.rowHeight);s=Math.max(0,s);var h=Math.floor(r/this.rowHeight);h=Math.min(this.rows-1,h);for(var n=(this.isotope.options.isOriginLeft?o.left:o.right)+i.outerWidth,a=s;a<=h;a++)this.rowXs[a]=Math.max(n,this.rowXs[a])},i.prototype._getContainerSize=function(){return this.maxX=Math.max.apply(Math,this.rowXs),{width:this.maxX}},i.prototype.needsResizeLayout=function(){return this.needsVerticalResizeLayout()},i}"function"==typeof define&&define.amd?define(["get-size/get-size","isotope/js/layout-mode"],i):i(t.getSize,t.Isotope.LayoutMode)}(window);